# MetadataBuilder.md

## π“ μ¤ν¬λ¦½νΈ μ„¤λ…
`MetadataBuilder.cpp`λ” λ©”λ¨λ¦¬μ—μ„ μ½μ–΄μ¨ Il2Cpp κµ¬μ΅°μ²΄ λ°μ΄ν„°λ¥Ό κΈ°λ°μΌλ΅ κ°€μ§ `global-metadata.dat` νμΌμ„ μƒμ„±ν•λ” λ¨λ“μ…λ‹λ‹¤. Unityμ Il2Cpp λ°νƒ€μ„μ΄ μ”κµ¬ν•λ” λ©”νƒ€λ°μ΄ν„° ν•μ‹μ— λ§μ¶° λ°”μ΄λ„λ¦¬ μ¶λ ¥μ„ μ΅°λ¦½ν•©λ‹λ‹¤. μ΄ νμΌμ€ Unity λ””μ»΄νμΌλ¬(dnSpy λ“±)μ—μ„ λ¶„μ„ κ°€λ¥ν• μ •μ  ν•νƒμ λ©”νƒ€λ°μ΄ν„° νμΌλ΅ μ‚¬μ©λ©λ‹λ‹¤.

---

## π― λ©ν‘
- `.data` μ„Ήμ…μ—μ„ μμ§‘ν• λ©”λ¨λ¦¬ κΈ°λ° ν¬μΈν„°λ“¤μ„ ν™μ©ν•μ—¬ Unity νΈν™ `global-metadata.dat` λ°”μ΄λ„λ¦¬λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
- Unity Il2Cpp λ°νƒ€μ„ κµ¬μ΅°μ²΄μ— λ§λ” μ •λ ¬ λ° λ μ΄μ•„μ›ƒμ„ λ³΄μ¥ν•μ—¬ dnSpy λλ” Il2CppInspectorλ΅ λ¶„μ„ κ°€λ¥ν• μμ¤€μ λ©”νƒ€λ°μ΄ν„° νμΌμ„ μƒμ„±ν•λ” κ²ƒμ΄ μµμΆ… λ©μ μ…λ‹λ‹¤.

---

## π§± λ™μ‘ μ›λ¦¬
- `MemoryReader`λ΅λ¶€ν„° μ „λ‹¬λ `typeDefinitions`, `methodDefinitions`, `stringLiteralTable` λ“±μ λ©”λ¨λ¦¬ ν¬μΈν„° λ°μ΄ν„°λ¥Ό μ…λ ¥μΌλ΅ λ°›μµλ‹λ‹¤.
- κ° κµ¬μ΅°μ²΄μ— ν•΄λ‹Ήν•λ” λ°μ΄ν„°λ¥Ό μμ°¨μ μΌλ΅ write ν•¨μ(`WriteTypeDefinitions`, `WriteMethodDefinitions`, ...)λ¥Ό ν†µν•΄ μ¶λ ¥ λ²„νΌμ— κΈ°λ΅ν•©λ‹λ‹¤.
- κµ¬μ΅°μ²΄λ³„λ΅ ν¬κΈ° κ³„μ‚°, offset λ³΄μ •, padding λ“±μ„ μλ™ μ²λ¦¬ν•μ—¬ Il2Cpp λ°νƒ€μ„μ΄ μ”κµ¬ν•λ” 16μ§„μ μ •λ ¬ μ”κ±΄μ„ λ§μ΅±μ‹ν‚µλ‹λ‹¤.

---

## β οΈ μ£Όμμ 
- Unity λ²„μ „μ— λ”°λΌ κµ¬μ΅°μ²΄ λ μ΄μ•„μ›ƒμ΄ λ‹¤λ¥Ό μ μμΌλ―€λ΅, λ³Έ λ„κµ¬λ” **Unity v31 κΈ°μ¤€**μΌλ΅ μ μ‘λμ—μµλ‹λ‹¤.
- μ¶λ ¥λλ” λ°μ΄ν„°λ” μ„μ μƒμ„±λ κ°’μ΄λ©° μ •ν™•ν• μ‹¤ν–‰μ„ λ³΄μ¥ν•μ§€ μ•μΌλ©°, λ¶„μ„/λ¦¬λ²„μ¤ μ©λ„λ΅λ§ μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤.
- λ°μ΄ν„° λ„λ½μ΄λ‚ μλ»λ ν¬μΈν„°κ°€ μ΅΄μ¬ν•λ©΄ dnSpy λ΅λ”© μ‹ μ¤λ¥κ°€ λ°μƒν•κ±°λ‚ μλ»λ λ””μ»΄νμΌ κ²°κ³Όλ¥Ό μ λ„ν•  μ μμµλ‹λ‹¤.

